define(function(e,t,n){t.init=function(t){var n,a={},r=[];e(["frequent.module.datatables","frequent.module.datatables.query","frequent.module.datatables.check","frequent.module.datatables.action"],function(e,c,o,d){$(".filter-form").find("select,:input:not(button):not([type=radio]):not([type=checkbox]),input[type=radio]:checked,input[type=checkbox]:checked").each(function(e,t){a[$(t).attr("name")]=$(t).val()}),n=e.datatables(t,a,r),query=c.query(n,a,r),check=o.check(n,r),action=d.action(n,r)})}}),define("frequent.module.datatables.columnDefs",function(){return function(e){return[{targets:1,className:"nowrap"}]}}),define("frequent.module.datatables.columns",["mustache"],function(e){return function(e,t){return $.map(e,function(e){return $(e).data("checkbox")?{data:"id",render:function(e,n,a){return'<div class="checkbox check-info"><input type="checkbox" id="check-'+e+'" class="select-checklist" value="'+e+'" '+(t.includes(e.toString())?'checked="checked"':"")+'><label for="check-'+e+'"></label></div>'},className:"small-cell"}:{data:$(e).data("column"),defaultContent:""}})}}),define("frequent.module.datatables.query",function(){return{query:function(e,t,n){$(".btn.btn-query").on("click",function(a){a.preventDefault(),Object.keys(n).forEach(function(e){delete n[e]}),$(e.containers()).find("i.select-all").data("state","unchecked").removeClass("fa-check-square-o").addClass("fa-square-o");var r=$("input[data-btn]:checked").data("btn");"verify"==r&&($(".btn-verify").attr("data-selected","").prop("disabled",!0).show(),$(".btn-unverify").attr("data-selected","").prop("disabled",!0).hide()),"unverify"==r&&($(".btn-verify").attr("data-selected","").prop("disabled",!0).hide(),$(".btn-unverify").attr("data-selected","").prop("disabled",!0).show()),$(".filter-form").find("select,:input:not(button):not([type=radio]):not([type=checkbox]),input[type=radio]:checked,input[type=checkbox]:checked").each(function(e,n){t[$(n).attr("name")]=$(n).val()}),e.draw()})}}}),define("frequent.module.datatables.check",function(){return{check:function(e,t){e.on("change","input[type=checkbox]",function(e){var n=$(e.currentTarget).closest("table").data("frequent"),a=$(e.currentTarget).val();$(e.currentTarget).is(":checked")?t.push(a):-1!==$.inArray(a,t)&&t.splice($.inArray(a,t),1),Object.keys(t).length?$("own"==n?".btn-delete":".btn-add").attr("data-selected",Object.keys(t).length).prop("disabled",!1):$("own"==n?".btn-delete":".btn-add").attr("data-selected","").prop("disabled",!0)}),e.on("change","select",function(e){$(e.currentTarget).closest("tr").find("input[type=checkbox]").prop("checked",!0).trigger("change")}),e.on("click","i.select-all",function(t){var n=$(t.currentTarget).data("state");$(e.containers()).find(".select-checklist").each(function(e,t){$(t).prop("checked","unchecked"==n).trigger("change")}),$(t.currentTarget).data("state","unchecked"==n?"checked":"unchecked").removeClass("fa-square-o fa-check-square-o").addClass("unchecked"==n?"fa-check-square-o":"fa-square-o")})}}}),define("frequent.module.datatables.action",["store2","cache","sweetalert2","select2"],function(e,t,n,a){return{action:function(a,r){var c=$(a.table().node()).data("frequent");"mpob"==c&&$(".btn.btn-add").on("click",function(a){a.preventDefault(),n.showLoading(),r.filter(function(e){return null!=e}).length>0?$.ajax({url:location.href,type:"POST",data:{add:r.filter(function(e){return null!=e})},success:function(a){r.length=0,e.remove("products"),e.remove("ports"),$.when(t("products","/filter/products"),t("ports","/filter/ports")).done(function(){n.fire({title:"Success",text:"Please refresh contract registration page for changes to take effect.",icon:"success"}),$.each($.fn.dataTable.tables(!0),function(e,t){var n=$(t).dataTable().api();n.ajax.reload(null,!1).table(),$(n.containers()).find("i.select-all").data("state","unchecked").removeClass("fa-check-square-o").addClass("fa-square-o")}),$(".btn-add").attr("data-selected","").prop("disabled",!0)})},error:function(e){n.fire({title:"Error",text:"Please select one or more items",icon:"warning"})}}):n.fire({title:"Error",text:"Please select one or more items",icon:"warning"})}),"own"==c&&$(".btn.btn-delete").on("click",function(a){a.preventDefault(),n.showLoading(),r.filter(function(e){return null!=e}).length>0?$.ajax({url:location.href+"?del="+encodeURI(JSON.stringify(r.filter(function(e){return null!=e}))),type:"DELETE",success:function(a){r.length=0,e.remove("products"),e.remove("ports"),$.when(t("products","/filter/products"),t("ports","/filter/ports")).done(function(){n.fire({title:"Success",text:"Please refresh contract registration page for changes to take effect.",icon:"success"}),$.each($.fn.dataTable.tables(!0),function(e,t){var n=$(t).dataTable().api();n.ajax.reload(null,!1).table(),$(n.containers()).find("i.select-all").data("state","unchecked").removeClass("fa-check-square-o").addClass("fa-square-o")}),$(".btn-delete").attr("data-selected","").prop("disabled",!0)})},error:function(e){n.fire({title:"Error",text:"Please select one or more items",icon:"warning"})}}):n.fire({title:"Error",text:"Please select one or more items",icon:"warning"})}),$(".btn.btn-defaults").off("click").on("click",function(t){n.fire({title:"Select default dropdown",text:"Please select default frequent to be used in Contract Query.",input:"select",confirmButtonText:"Apply",showCancelButton:!0,focusConfirm:!1,allowOutsideClick:function(){return!n.isLoading()},preConfirm:function(t){return n.showLoading(),$.post("/my-frequents/default-product",{id:t}).then(function(t){e.remove("defaults")})},onOpen:function(e){$.getJSON("/filter/products",function(t){$(e).find(".swal2-select").select2({data:$.map(t,function(e){return e.id=e.id||e.code,e.text=e.code+" - "+e.description,e}),dropdownAutoWidth:!0,escapeMarkup:function(e){return e},templateResult:function(e){return e.loading?e.text:'<div><span class="short_description">'+e.code+'</span> - <span class="description">'+e.description+"</span></div>"},templateSelection:function(e){return e.code?e.code+" - "+e.description:e.text}})})}})})}}}),define("frequent.module.datatables",["datatables","frequent.module.datatables.columns","frequent.module.datatables.columnDefs"],function(){return{datatables:function(e,t,n){var a=e.find("thead tr th");return t=$.extend(t,{group:e.data("frequent")}),e.DataTable({pageLength:25,processing:!0,serverSide:!0,ordering:!1,order:[[1,"asc"]],dom:'rt<"bottom row blur"<"col-md-6"p>><"clear">',columns:require("frequent.module.datatables.columns")(a,n),columnDefs:require("frequent.module.datatables.columnDefs")(a),language:{sLengthMenu:"Show _MENU_",processing:!1,emptyTable:"No matching records found or item(s) has been added/removed. Enter atleast 3 characters to search.",zeroRecords:"No matching records found or item(s) has been added/removed. Enter atleast 3 characters to search."},ajax:{url:location.href,data:function(e){return $.extend(e,t)}}})}}});
